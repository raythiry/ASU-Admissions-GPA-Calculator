<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ABOR Core GPA Calculator</title>
  <style>
    :root {
      --asu-maroon: #8C1D40;
      --asu-gold: #FFC627;
      --gray-4: #BFBFBF;
      --gray-6: #E8E8E8;
      --radius: 4px;
    }
    html, body {
      font-family: Arial, Helvetica, sans-serif;
      background: #FFFFFF;
      max-width: 960px;
      margin: 0 auto;
      padding: 32px 24px;
      color: #191919;
      line-height: 1.5;
    }
    h1 {
      font-size: 2.4rem;
      color: var(--asu-maroon);
      background: var(--asu-gold);
      padding: 24px;
      text-align: center;
      border-radius: var(--radius);
      margin-bottom: 32px;
    }
    h2 {
      font-size: 1.35rem;
      color: var(--asu-maroon);
      border-bottom: 2px solid var(--asu-gold);
      padding-bottom: 6px;
      margin-top: 28px;
    }
    h3 {
      font-size: 1.05rem;
      font-weight: bold;
      color: var(--asu-maroon);
      margin-top: 16px;
    }
    p, li {
      font-size: 1rem;
    }
    label {
      display: block;
      color: var(--asu-maroon);
      font-size: 0.9rem;
      font-weight: bold;
      margin-top: 14px;
    }
    select {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      border: 1px solid var(--gray-4);
      border-radius: var(--radius);
    }
    .subject {
      background: var(--gray-6);
      padding: 20px;
      margin-top: 28px;
      border-left: 6px solid var(--asu-gold);
      border-radius: var(--radius);
    }
    button {
      background: var(--asu-maroon);
      color: #FFFFFF;
      border: none;
      padding: 16px;
      font-size: 1rem;
      font-weight: bold;
      border-radius: var(--radius);
      width: 100%;
      margin-top: 32px;
      cursor: pointer;
    }
    button:hover {
      background: #6e1832;
    }
    .result {
      margin-top: 32px;
      padding: 24px;
      background: #FFFFFF;
      border-radius: var(--radius);
      border: 1px solid var(--gray-4);
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      white-space: pre-wrap;
    }
    .badge {
      display: inline-block;
      padding: 12px 16px;
      font-size: 1rem;
      font-weight: bold;
      border-radius: var(--radius);
      margin-bottom: 16px;
    }
    .badge.green {
      background: #d4edda;
      color: #155724;
      border-left: 6px solid #28a745;
    }
    .badge.yellow {
      background: #fff3cd;
      color: #856404;
      border-left: 6px solid #ffc107;
    }
    .badge.red {
      background: #f8d7da;
      color: #721c24;
      border-left: 6px solid #dc3545;
    }
    a {
      color: var(--asu-maroon);
      text-decoration: underline;
      font-weight: bold;
    }
    a:hover {
      text-decoration: none;
    }
  </style>
</head>
<body>
  <h1>ABOR Core GPA Calculator</h1>
  <form id="gpaForm">
    <div class="subject">
      <h2>Grade Level</h2>
      <label for="gradeLevel">What is your current grade level?
        <select id="gradeLevel" required>
          <option value="">-- Select --</option>
          <option value="Freshman">Freshman</option>
          <option value="Sophomore">Sophomore</option>
          <option value="Junior">Junior</option>
          <option value="Senior">Senior</option>
        </select>
      </label>
    </div>
    <div id="subjects"></div>
    <button type="button" onclick="calculateGPA()">Calculate GPA</button>
  </form>
  <div id="results" class="result" style="display: none;"></div>
  <script>
    const subjects = [
      { name: 'English', semesters: 8 },
      { name: 'Math', subfields: [
        { name: 'Algebra I', semesters: 2 },
        { name: 'Geometry', semesters: 2 },
        { name: 'Algebra II', semesters: 2 },
        { name: 'Advanced Math', semesters: 2 }
      ]},
      { name: 'Lab Science', subfields: [
        { name: 'Biology', semesters: 2 },
        { name: 'Chemistry', semesters: 2 },
        { name: 'Physics or Earth Science', semesters: 2 }
      ]},
      { name: 'Social Studies', subfields: [
        { name: 'American History', semesters: 2 },
        { name: 'Other Social Studies', semesters: 2 }
      ]},
      { name: 'Second Language', semesters: 4 },
      { name: 'Fine Arts/CTE', semesters: 2 }
    ];

    const gradePoints = { A: 4.0, B: 3.0, C: 2.0, D: 1.0, E: 0.0 };

    function loadSubjects() {
      const container = document.getElementById('subjects');
      container.innerHTML = '';
      subjects.forEach((subject, idx) => {
        const div = document.createElement('div');
        div.className = 'subject';
        div.innerHTML = '<h2>' + subject.name + '</h2>';
        if (subject.subfields) {
          subject.subfields.forEach((sub, subIdx) => {
            div.innerHTML += '<h3>' + sub.name + '</h3>';
            for (let i = 0; i < sub.semesters; i++) {
              div.innerHTML += `
                <label>Semester ${i + 1} Grade:
                  <select name="${sub.name}" data-subject="${idx}" data-subfield="${subIdx}">
                    <option value="">--</option>
                    <option value="A">A</option>
                    <option value="B">B</option>
                    <option value="C">C</option>
                    <option value="D">D</option>
                    <option value="E">E</option>
                  </select>
                </label>`;
            }
          });
        } else {
          for (let i = 0; i < subject.semesters; i++) {
            div.innerHTML += `
              <label>Semester ${i + 1} Grade:
                <select name="${subject.name}" data-subject="${idx}">
                  <option value="">--</option>
                  <option value="A">A</option>
                  <option value="B">B</option>
                  <option value="C">C</option>
                  <option value="D">D</option>
                  <option value="E">E</option>
                </select>
              </label>`;
          }
        }
        container.appendChild(div);
      });
    }

    function calculateGPA() {
      const gradeLevel = document.getElementById('gradeLevel').value;
      if (!gradeLevel) {
        alert("Please select your current grade level.");
        return;
      }

      const inputs = document.querySelectorAll('select');
      const subjectTotals = {};
      const deficiencies = new Set();

      subjects.forEach(subject => {
        subjectTotals[subject.name] = { points: 0, count: 0 };
      });

      inputs.forEach(input => {
        const grade = input.value;
        if (grade && gradePoints.hasOwnProperty(grade)) {
          const subjectIdx = parseInt(input.dataset.subject);
          const subject = subjects[subjectIdx];
          subjectTotals[subject.name].points += gradePoints[grade];
          subjectTotals[subject.name].count += 1;
        }
      });

      let totalPoints = 0;
      let totalCount = 0;
      let output = '';

      for (const subject in subjectTotals) {
        const { points, count } = subjectTotals[subject];
        if (count > 0) {
          const gpa = points / count;
          output += `${subject} GPA: ${gpa.toFixed(2)}
`;
          totalPoints += points;
          totalCount += count;
          if (gpa < 2.0) deficiencies.add(subject);
        }
      }

      const coreGPA = totalCount > 0 ? (totalPoints / totalCount) : 0;
      output += `
Total Core GPA: ${coreGPA.toFixed(2)}
`;

      let color = 'black';
      let badgeClass = 'yellow';
      let badgeText = '⚠️ Admission Consideration';

      if (coreGPA >= 3.4) {
        color = 'green';
        badgeClass = 'green';
        badgeText = '✅ On Track for Admission';
        output += gradeLevel === "Senior"
          ? `
You are on track for admission and may also be a strong candidate for Barrett, The Honors College.
Apply now: <a href="https://honors.asu.edu" target="_blank">honors.asu.edu</a>`
          : `
You are on track for admission and may also be a strong candidate for Barrett, The Honors College.
Talk to your counselor: <a href="https://honors.asu.edu" target="_blank">honors.asu.edu</a>`;
      } else if (coreGPA >= 3.0) {
        color = 'green';
        badgeClass = 'green';
        badgeText = '✅ On Track for Admission';
        output += gradeLevel === "Senior"
          ? `
You are on track for assured admission to ASU.
Apply now: <a href="https://admission.asu.edu" target="_blank">admission.asu.edu</a>`
          : `
You are on track for assured admission to ASU. Stay focused and keep your GPA strong.`;
      } else if (coreGPA >= 2.8) {
        color = '#996600';
        badgeClass = 'yellow';
        output += gradeLevel === "Senior"
          ? `
You're on track for admission consideration. We encourage you to apply: <a href="https://admission.asu.edu" target="_blank">admission.asu.edu</a>`
          : `
You're on track for admission consideration. Continue improving your academic performance.`;
      } else {
        if (gradeLevel === "Freshman" || gradeLevel === "Sophomore") {
          color = 'red';
          badgeClass = 'red';
          badgeText = '❌ GPA Concern';
          output += `
Talk to your school counselor or an ASU admission advisor for help improving your academic record.`;
        } else if (gradeLevel === "Junior") {
          if (coreGPA < 2.0) {
            color = 'red';
            badgeClass = 'red';
            badgeText = '❌ GPA Concern';
            output += `
Admission is unlikely. Consider MyPath2ASU: <a href="https://mypath2asu.asu.edu" target="_blank">mypath2asu.asu.edu</a>`;
          } else {
            color = '#cc6600';
            badgeClass = 'yellow';
            output += `
Admission is possible, but your current GPA is below the typical threshold. Strongly recommend improving your GPA.`;
          }
        } else if (gradeLevel === "Senior") {
          if (coreGPA < 2.5) {
            color = 'red';
            badgeClass = 'red';
            badgeText = '❌ GPA Concern';
            output += `
Consider MyPath2ASU: <a href="https://mypath2asu.asu.edu" target="_blank">mypath2asu.asu.edu</a>`;
          } else {
            color = '#996600';
            badgeClass = 'yellow';
            output += `
You're on track for admission consideration. We encourage you to apply: <a href="https://admission.asu.edu" target="_blank">admission.asu.edu</a>`;
          }
        }
      }

      if (deficiencies.size > 0) {
        if (deficiencies.has("Math") && deficiencies.has("Lab Science")) {
          output += `
Note: Admission is not possible with deficiencies in both math and lab science.`;
        } else {
          output += `
You have a deficiency in: ${[...deficiencies].join(", ")}. You may still be admissible.`;
        }
      }

      document.getElementById("results").style.display = "block";
      document.getElementById("results").innerHTML = `
        <div class="badge ${badgeClass}">${badgeText}</div>
        <div style="color:${color}">${output}</div>
      `;
      document.getElementById("results").scrollIntoView({ behavior: 'smooth' });
    }

    document.addEventListener("DOMContentLoaded", loadSubjects);
  </script>
</body>
</html>
